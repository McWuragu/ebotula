<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.51
     from gdbm.texinfo on 7 January 1998 -->

<TITLE>gdbm - Compatibility</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="gdbm_1.html">first</A>, <A HREF="gdbm_14.html">previous</A>, <A HREF="gdbm_16.html">next</A>, <A HREF="gdbm_17.html">last</A> section, <A HREF="gdbm_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC15" HREF="gdbm_toc.html#TOC15">Compatibility with standard <CODE>dbm</CODE> and <CODE>ndbm</CODE>.</A></H1>

<P>
GNU <CODE>dbm</CODE> files are not <CODE>sparse</CODE>. You can copy them with the UNIX
<CODE>cp</CODE> command and they will not expand in the copying process.

</P>
<P>
There is a compatibility mode for use with programs that already use UNIX
<CODE>dbm</CODE> and UNIX <CODE>ndbm</CODE>.

</P>
<P>
GNU <CODE>dbm</CODE> has compatibility functions for <CODE>dbm</CODE>. For <CODE>dbm</CODE>
compatibility functions, you need the include file <CODE>dbm.h</CODE>.

</P>
<P>
In this compatibility mode, no <CODE>gdbm</CODE> file pointer is required
by the user, and Only one file may be opened at a time. All users in
compatibility mode are assumed to be writers. If the <CODE>gdbm</CODE> file is a
read only, it will fail as a writer, but will also try to open it as a reader.
All returned pointers in datum structures point to data that <CODE>gdbm</CODE> WILL
free. They should be treated as static pointers (as standard UNIX <CODE>dbm</CODE>
does). The compatibility function names are the same as the UNIX <CODE>dbm</CODE>
function names. Their definitions follow:

</P>

<PRE>
int dbminit(name);
int store(key, content);
datum fetch(key);
int delete(key);
datum firstkey();
datum nextkey(key);
int dbmclose();
</PRE>

<P>
Standard UNIX <CODE>dbm</CODE> and GNU <CODE>dbm</CODE> do not have the same data
format in the file. You cannot access a standard UNIX <CODE>dbm</CODE> file with GNU
<CODE>dbm</CODE>!  If you want to use an old database with GNU <CODE>dbm</CODE>, you must
use the <CODE>conv2gdbm</CODE> program.

</P>
<P>
Also, GNU <CODE>dbm</CODE> has compatibility functions for <CODE>ndbm</CODE>. For
<CODE>ndbm</CODE> compatibility functions, you need the include file <CODE>ndbm.h</CODE>.

</P>
<P>
Again, just like <CODE>ndbm</CODE>, any returned datum can be assumed to be static
storage. You do not have to free that memory, the <CODE>ndbm</CODE> compatibility
functions will do it for you.

</P>
<P>
The functions are:

</P>

<PRE>
DBM *dbm_open(name, flags, mode);
void dbm_close(file);
datum dbm_fetch(file, key);
int dbm_store(file, key, <CODE>content</CODE>, flags);
int dbm_delete(file, key);
datum dbm_firstkey(file);
datum dbm_nextkey(file);
int dbm_error(file);
int dbm_clearerr(file);
int dbm_dirfno(file);
int dbm_pagfno(file);
int dbm_rdonly(file);
</PRE>

<P>
If you want to compile an old C program that used UNIX <CODE>dbm</CODE> or <CODE>ndbm</CODE>
and want to use <CODE>gdbm</CODE> files, execute the following <CODE>cc</CODE> command:

</P>

<PRE>
cc ... -L /usr/local/lib -lgdbm
</PRE>

<P><HR><P>
Go to the <A HREF="gdbm_1.html">first</A>, <A HREF="gdbm_14.html">previous</A>, <A HREF="gdbm_16.html">next</A>, <A HREF="gdbm_17.html">last</A> section, <A HREF="gdbm_toc.html">table of contents</A>.
</BODY>
</HTML>
